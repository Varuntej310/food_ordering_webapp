<style>
    /* General Styles*/
body { 
  font-family: Arial, sans-serif; 
  margin: 0;
}

/* Header Styles */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background-color: #f2f2f2;
}

.user-info {
  display: flex;
  align-items: center;
}

.user-info a,
.user-info form {
  margin-left: 10px;
}

/* Search Container Styles */
.search-container {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  position: sticky;
  top: 0;
  background-color: #fff;
  z-index: 1;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Added for subtle depth */
}

.search-form {
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 600px;
  border: 1px solid #ccc;  /* Added for form border */
  border-radius: 4px;      /* Added for rounded corners */
}

.search-form input[type="text"] {
  flex: 1;
  padding: 10px;
  border: none;          /* Remove default input border */
  border-radius: 4px 0 0 4px;
}

.search-form button[type="submit"] {
  padding: 10px 20px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 0 4px 4px 0;
  cursor: pointer;
}

/* Menu Items Styles */
.menu-items {
  margin-top: 20px;
}

.menu-item {
  width: 100%;
  max-width: 600px;
  padding: 20px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 8px;       /* Increased border-radius */
  text-align: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);  /* Added for subtle depth */
}

.menu-item h3 {
  margin-top: 0;
}

.menu-item p {
  margin-bottom: 10px;
}

.menu-item form {
  margin-top: 10px;
}

</style>

<div class="header">
    <div style="display: flex; flex-direction: column;">
        {% if user.is_authenticated %}
        <p>Logged in as {{ user.phone_number }}</p>
        <div class="user-info">
            <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit">Logout</button>
            </form>
            <a href="{% url 'user_orders' %}">Your Orders</a>
            <a href="{% url 'cart_view' %}">Cart</a>
            <a href="{% url 'search_menu' %}">Search</a>
        </div>
        {% else %}
        <p>Please <a href="{% url 'login' %}">login</a> or <a href="{% url 'signup' %}">signup</a></p>
        {% endif %}
    </div>
</div>

<!-- <div class="search-container">
    <form class="search-form" method="get" action="{% url 'search_menu' %}">
        <input type="text" name="q" value="{{ query }}" placeholder="Search menu items...">
        <button type="submit">Search</button>
    </form>
</div> -->

<div class="menu-items">
    {% for item in menu_items %}
    <div class="menu-item">
        <h3>{{ item.item }}</h3>
        <p>{{ item.description }}</p>
        <p>Price: {{ item.price }}</p>
        <form action="{% url 'add_to_cart' item.id %}" method="post">
            {% csrf_token %}
            <input type="submit" value="Add to Cart">
        </form>
        {% for cart_item in cart_items %}
        {% if cart_item.menu_item.id == item.id %}
        <div style="display: flex; justify-content: center; align-items: center;">
            <div>
                <p>Quantity in Cart: {{ cart_item.quantity }}</p>
            </div>
            <div style="padding-top: 15px; padding-left: 10px;">
                <form action="{% url 'remove_from_cart' cart_item.id %}" method="post">
                    {% csrf_token %}
                    <input type="submit" value="-">
                </form>
            </div>
        </div>
        {% endif %}
        {% endfor %}
        <hr>
    </div>
    {% endfor %}
</div>

<script>
    window.addEventListener('scroll', function() {
        var searchContainer = document.querySelector('.search-container');
        var scrollPosition = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollPosition > 0) {
            searchContainer.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';
        } else {
            searchContainer.style.boxShadow = 'none';
        }
    });
</script>
